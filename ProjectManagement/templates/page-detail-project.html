{% extends "base.html" %}
{% load staticfiles %}
{% block head %}

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <link rel="stylesheet" href="../static/css/chosen/prism.css">
  <link rel="stylesheet" href="../static/css/chosen/chosen.css">
{% endblock %}
{% block content %}


    <!--Modal-->
    <div class = "modal" id = "modal2">
        <nav class="background-nav-modal">
            <a class="modal-close right"><i class="mdi-navigation-close"></i></a>
            <h3 class = "bold center">Eliminar Tarea</h3>
        </nav>
        <div class="modal-content">
            <p> ¿Está seguro que desea eliminar esta tarea? </p>
        </div>
        <div class="divider"></div>
        <div class = "modal-footer background-nav-modal">
            <a href="#" class="waves-effect btn-flat modal-action modal-close white-text">Aceptar</a>
            <a href="#" class="waves-effect btn-flat modal-action modal-close white-text">Cancelar</a>
        </div>
    </div>

        <!--Modal-->
    <div class = "modal" id = "modal3">
        <nav class="background-nav-modal">
            <a class="modal-close right"><i class="mdi-navigation-close"></i></a>
            <h3 class = "bold center">Detalle de Tarea</h3>
        </nav>
        <div class="modal-content">
            <div class="row">
                <div class="col m2"><p></p></div>
                <div class="col m8">
                    <p> Nombre: Tarea 1 </p>
                    <p> Responsable: Pedro Pérez </p>
                    <p> Status: In Progress </p>
                    <p> Descripción: Aquí va la descripción de la tarea 1 </p>
                </div>
            </div>
        </div>
        <div class="divider"></div>
        <div class = "modal-footer background-nav-modal">
            <a href="#" class="waves-effect btn-flat modal-action modal-close white-text">Aceptar</a>
        </div>
    </div>

        <!--Modal update task-->
  
    <!--Modal People-->
    <div class = "modal" id = "new_people">
        <nav class="background-nav-modal">
            <a class="modal-close right"><i class="mdi-navigation-close"></i></a>
            <h3 class = "bold center">Personas</h3>
        </nav>
            <div class="modal-content">
                <div class="container">
                    <div class="section">
                        <div class="row">
                            <div class="col s2"><p></p></div>
                            <div class="col s8">
                                 <form class="col s12">
                                     <div class="row">
                                          <div class="input-field col s12">
                                            <select data-placeholder="Usuarios" class="chosen-select browser-default" multiple tabindex="4" >
                                              <option value=""></option>
                                              <option>José López</option>
                                              <option>Ana González</option>
                                              <option>María Martínez</option>
                                              <option>Samuel Rondón</option>
                                          </select>
                                          </div>
                                      </div>
                                  </form> 
                            </div>
                        </div>
                    </div>
                </div> 
            </div>
            <div class = "modal-footer background-nav-modal">
            <a href="#" class="waves-effect waves-red btn-flat modal-action modal-close white-text ">Agregar</a>
            <a href="{% url 'new_users' %}" class="waves-effect waves-red btn-flat modal-action modal-close white-text">Registrar</a>
        </div>
    </div>
    <!--End modal People-->

    <!--Modal Documents-->
    <div class = "modal" id = "new_document">
        <nav class="background-nav-modal">
            <a class="modal-close right"><i class="mdi-navigation-close"></i></a>
            <h3 class = "bold center">Documentos</h3>
        </nav>
        <div class="modal-content">
                <div class="container">
                    <div class="section">
                        <div class="row">
                            <div class="col s2"><p></p></div>
                            <div class="col s8">
                                 <form class="col s12" id="showDocument">
                                     <div class="col l2 right">
                                             <p><a class="btn-floating btn-large tooltipped waves-effect waves-light modal-trigger  deep-purple accent-2"
                                                   data-position="bottom" data-delay="50" data-tooltip="Más Documentos" onclick="moreDocument();">
                                                 <i class="mdi-content-add"></i></a></p>
                                     </div>
                                     <div class="row" >
                                          <div class="input-field col l10">
                                              <div class="file-field input-field">
                                                  <input class="file-path validate" type="text" />
                                                  <div class="btn">
                                                    <span>File</span>
                                                    <input type="file"/>
                                                  </div>
                                                </div>
                                          </div>
                                     </div>

                                 </form>
                            </div>
                        </div>
                    </div>
                </div>
        </div>
        <div class = "modal-footer background-nav-modal">
            <a href="#" class="waves-effect btn-flat modal-action modal-close white-text">Aceptar</a>
            <a href="#" class="waves-effect btn-flat modal-action modal-close white-text">Cancelar</a>
        </div>
    </div>

    <!--End Modal Documents-->


    <!-- Gantt Chart-->
    <!--start container-->
    <div class="container">
        <div class="section">
            <h2 class="header bold" id = "project"><b>{{ project.name}}</b></h2>
            <h4 class="bold"><b>Cliente Responsable:</b> {{client}}</h4>
            <div class="row">
            <div class="col l9">
            <span>{{project.description}}</span>
            </div>
            </div>
            <br>
            <div class="row">
                 <div class = "col s9 m9 l9 center">
                     <div id="gantt_chart"></div>
                 </div>
            </div>
        </div>

        <!-- DataTable-->
        <div class="section">
             <!--DataTables Users-->
            <div id="table-datatables">
                <div class="row">
                    <div class="col s9 m9 l9">
                        <h3 class="header bold ">Mis Tareas</h3>
                        <table id="data-table-simple" class="responsive-table display centered striped tableProject" cellspacing="0">
                            <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nombre</th>
                                <th>Responsable</th>
                                <th>Fecha Inicio</th>
                                <th>Fecha Fin</th>
                                <th>Requerida por</th>
                                <th>Requiere de</th>
                                <th>Status</th>
                                <th id = 'accion'>Acción</th>
                            </tr>
                            </thead>
                            <tfoot>
                            <tr>
                                <th>ID</th>
                                <th>Nombre</th>
                                <th>Responsable</th>
                                <th>Fecha Inicio</th>
                                <th>Fecha Fin</th>
                                <th>Requerida por</th>
                                <th>Requiere de</th>
                                <th>Status</th>
                                <th>Acción</th>
                            </tr>
                            </tfoot>
                            <tbody>
                            {% for task in tasks %}
                                <tr>

                                <td>{{ task.code }}</td>
                                <td>{{ task.name }}</td>
                                <td>{{ task.users }}</td>
                                <td>{{ task.get_startDate }}</td>
                                <td>{{ task.get_endDate }}</td>
                                <td>{%for d in dep %}
                                    {% if d.dependence == task.code %}
                                    {{d.task.code}}
                                    {% endif %}
                                    {% endfor %}</td>

                                <td>{%for d in dep %}
                                    {% if d.task.code == task.code %}
                                    {{d.dependence}}
                                    {% endif %}
                                    {% endfor %}
                                    </td>
                                <td>
                                    <select class="browser-default">
                                        <option value="" disabled selected>Status</option>
                                        <option value="1">In Progress</option>
                                        <option value="2">Technical Review</option>
                                        <option value="3">Functional Review</option>
                                        <option value="3">Customer Acceptance</option>
                                    </select>
                                </td>
                                <td>
                                    <a class="waves-effect waves-light tooltipped" data-position="left" data-delay="50" data-tooltip="Editar Tarea" href="{% url 'update_task' task.code %}"><i class = "mdi-content-create"> </i></a>
                                    <a class = "waves-effect waves-light modal-trigger tooltipped" data-position="top" data-delay="50" data-tooltip="Ver Tarea" href = "">
                                        <i class = "mdi-action-visibility" id = ""></i></a>
                                    <a class = "waves-effect waves-light modal-trigger tooltipped" data-position="right" data-delay="50" data-tooltip="Eliminar Tarea" href = "">
                                        <i class = "mdi-action-highlight-remove" id = "remove"></i></a>

                                </td>

                                </tr>
                             {% endfor %}

                            </tbody>
                        </table>
                    </div>
                    <div class = "row">
                        <div class="col s2 m2 l1">
                            <p><a href="{% url 'new_task' project.pk%}" class="btn-floating btn-large tooltipped waves-effect waves-light deep-purple accent-2 lighten-2 modal-trigger"
                                 data-position="bottom" data-delay="50" data-tooltip="Nueva Tarea" >
                                <i class="mdi-content-add"></i></a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
    <div class="section">
        <div class="row">
            <div class="col s4 m4 l4">
                <a class="btn  deep-purple accent-2 waves-effect waves-light" href="#">Cancelar</a>
            </div>

            <div class="col l2"><p></p></div>
            <div class="col s4 m4 l3">
                <a class="btn right disabled" href="#">Cerrar Proyecto</a>
            </div>
        </div>
    </div>
    </div>
    <!-- End Gantt Chart-->



<!-- LEFT RIGHT SIDEBAR NAV-->
    <aside id="right-sidebar-nav">
        <ul id="slide-out" class="side-nav fixed right-aligned rightside-navigation">
            <li class="li-hover">
               <h4 class="center">Restan<br>{{resta}} <br>Días</h4>
            </li>
            <li class="li-hover"><div class="divider"></div></li>
            <li class="li-hover">
            <li class="li-hover">
               <p class="center">Fecha Inicio: {{project.get_startDate}}</p>
                <p class="center">Fecha Fin: {{project.get_endDate}}</p>
            </li>
            <li class="li-hover">

            </li>
            <ul class="chat-collapsible" data-collapsible="expandable">
                <li>
                    <div class="collapsible-header teal white-text active center">
                        Personas<a class="right tooltipped modal-trigger" data-position="bottom" data-delay="50" data-tooltip="Agregar Personas" href="#new_people"><i class="mdi-content-add" ></i></a>
                    </div>

                    <div class="collapsible-body recent-activity">
                        <div class="recent-activity-list  row">
                            <div class="col s9 recent-activity-list-text">
                            
                              {%for i in projectUser%}
                                <div>{{i.user}}</div>
                              {% endfor %}
                            </div>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="collapsible-header light-blue white-text active center">
                        Documentos
                        <a class="right tooltipped modal-trigger " data-position="bottom" data-delay="50" data-tooltip="Agregar Documentos"
                           href="#new_document"><i class="mdi-content-add"></i></a>
                    </div>
                    <div class="collapsible-body sales-repoart">
                        <div class="sales-repoart-list chat-out-list row">
                            <div class="col s9 recent-activity-list-text">
                                <div>Documento 1</div>
                                <div>Documento 2</div>
                                <div>Documento 3</div>
                            </div>
                        </div>
                    </div>
                </li>

                </ul>
            </li>
        </ul>
    <!--<a href="#" data-activates="slide-out" class="sidebar-collapse btn-floating btn-medium waves-effect waves-light hide-on-large-only darken-2"><i class="mdi-navigation-menu" ></i></a> -->
    </aside>
{% endblock %}

{% block footer %}
      <footer class="page-footer background-nav">
    <div class="footer-copyright">
      <div class="container">
        <span class ="grey-text text-lighten-4">Copyright © 2017 <a class="grey-text text-lighten-4" target="_blank">IDBC Group</a> All rights reserved.</span>
        <span class="right grey-text text-lighten-4" style="padding-right: 230px;"> Design and Developed by <a class="grey-text text-lighten-4">IDBC Group</a></span>
        </div>
    </div>
  </footer>
{% endblock %}

{% block script%}
    <!--chart google-->

  <script src="../static/js/chosen/chosen.jquery.js" type="text/javascript"></script>
  <script src="../static/js/chosen/prism.js" type="text/javascript" charset="utf-8"></script>
  <script src="../static/js/chosen/init.js" type="text/javascript" charset="utf-8"></script>

  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript" src="../static/js/diagram.js"></script>
  <script type="text/javascript" src="../static/js/moreDocument.js"></script>

  <script type="text/javascript" src="../static/js/kwargsTask.js"></script>


{% endblock %}